import sys
import yfinance as yf
from utils.utils import *
from extra.individual import individualReport
from objects.stock import Stock
from objects.agent import Agent
from objects.state import State
from objects.actions import Actions

tickerList = ["VOO", "AAPL", "AMZN", "NFLX", "ROST", "NVDA"]

# NOTE: momentum data still required


def initializeDummyData():
    stock1 = Stock()
    stock2 = Stock()
    stock3 = Stock()
    stock4 = Stock()
    stock5 = Stock()
    stock6 = Stock()

    stock1.setCustomValues("NFLX", 57.05000114440918, 351.4049987792969, 370.1750030517578, 273.6699981689453, 362.51499938964844, 371.84999084472656,
                           348.9100036621094, 357.4200134277344, 359.44000244140625, 361.20001220703125, 349.875, 1.7047961645994651, 0.06114556444981186, 1.0696652180938961)

    stock2.setCustomValues("VOO", 152.7884708040724, 232.33375819774386, 251.7055273590439, 236.3839015441721, 244.79246748159932, 258.53520303163407, 250.03982503516852,
                           249.11555082892957, 249.96798773052964, 249.93922873415227, 244.52783128435908, 0.738041458058553, -0.20005707583905138, -2.4459761444006896)

    stock3.setCustomValues("AAPL", 20.080105592270208, 45.26319581638896, 54.49617236034237, 43.22628914586592, 42.46720892979325, 49.94499818407954, 44.607715828347814,
                           44.17341362132984, 44.564891724447676, 44.185653446037584, 43.472431641267804, 0.7148401274854206, -0.6010641347049844, -1.306485975399011)

    stock4.setCustomValues("AMZN", 310.62001037597656, 1610.9700317382812, 2006.2349853515625, 1641.3349609375, 1628.0599975585938, 1945.2149658203125,
                           1851.6600341796875, 1844.0, 1841.760009765625, 1849.27001953125, 1818.7650146484375, 1.5528161924697885, 0.18167501508472786, 16.52120807359151)

    stock5.setCustomValues("NVDA", 4.506433644148066, 61.768578780221134, 69.24782727745472, 38.89142354390313, 39.315400536629184, 44.26001356131365,
                           37.989375202446496, 37.22591430477684, 37.17865900836264, 36.60170963117244, 35.03497727580039, 2.3148425848936225, -0.8322165672708406, -1.457834426143925)

    stock6.setCustomValues("ROST", 31.764470347691677, 75.02976134702209, 93.17202772817777, 82.95335567125784, 92.3398033617815, 97.2675696849025, 95.30698810406818,
                           93.30218285129722, 92.37840596799897, 93.9999223695455, 89.07635275342827, 0.900450177955308, -0.13426369628096538, -0.5979860185951213)

    stockList.append(stock1)
    stockList.append(stock2)
    stockList.append(stock3)
    stockList.append(stock4)
    stockList.append(stock5)
    stockList.append(stock6)


if __name__ == "__main__":
    # val = int(input("Options:\n1. Individual Stock Report\n2. Stock Analysis\n"))
    # if(val == 1):
    #     individualReport()
    # else:
    # commented out and using hardcoded stock vals for debugging, retrieves real stock data
    # stockAnalysis(tickerList)
    initializeDummyData()
    # initializes agent with name, starting cash, list of stock data
    buffett = Agent("buffett", 2000, stockList)
    testStock = Stock()
    testStock2 = Stock()
    testStock3 = Stock()
    testStock.setCustomValues("NFLX", 57.05000114440918, 351.4049987792969, 370.1750030517578, 273.6699981689453, 362.51499938964844, 371.84999084472656,
                              348.9100036621094, 357.4200134277344, 359.44000244140625, 361.20001220703125, 349.875, 1.7047961645994651, 0.06114556444981186, 1.0696652180938961)

    testStock2.setCustomValues("AAPL", 20.080105592270208, 45.26319581638896, 54.49617236034237, 43.22628914586592, 42.46720892979325, 49.94499818407954, 44.607715828347814,
                               44.17341362132984, 44.564891724447676, 44.185653446037584, 43.472431641267804, 0.7148401274854206, -0.6010641347049844, -1.306485975399011)

    testStock3.setCustomValues("NVDA", 4.506433644148066, 61.768578780221134, 69.24782727745472, 38.89142354390313, 39.315400536629184, 44.26001356131365,
                               37.989375202446496, 37.22591430477684, 37.17865900836264, 36.60170963117244, 35.03497727580039, 2.3148425848936225, -0.8322165672708406, -1.457834426143925)

    buffett.buy(testStock, 3)
    buffett.buy(testStock2, 5)
    buffett.buy(testStock3, 2)
    # report new state after decision
    buffett.reportState()

    applesUp = Stock()
    nfxUp = Stock()
    nvdaUp = Stock()

    applesUp.setCustomValues("AAPL", 20.080105592270208, 45.26319581638896, 54.49617236034237, 43.22628914586592, 42.46720892979325, 49.94499818407954, 44.607715828347814,
                             44.17341362132984, 44.564891724447676, 44.185653446037584, 63.472431641267804, 0.7148401274854206, -0.6010641347049844, -1.306485975399011)
    nfxUp.setCustomValues("NFLX", 57.05000114440918, 351.4049987792969, 370.1750030517578, 273.6699981689453, 362.51499938964844, 371.84999084472656,
                          348.9100036621094, 357.4200134277344, 359.44000244140625, 361.20001220703125, 349.875, 1.7047961645994651, 0.06114556444981186, 1.0696652180938961)
    nvdaUp.setCustomValues("NVDA", 4.506433644148066, 61.768578780221134, 69.24782727745472, 38.89142354390313, 39.315400536629184, 44.26001356131365,
                           37.989375202446496, 37.22591430477684, 37.17865900836264, 36.60170963117244, 35.03497727580039, 2.3148425848936225, -0.8322165672708406, -1.457834426143925)

    buffett.sell(applesUp, 5)
    buffett.sell(nfxUp, 3)
    buffett.sell(nvdaUp, 2)
    buffett.reportState()
